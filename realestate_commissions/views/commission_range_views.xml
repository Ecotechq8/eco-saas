<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record model="ir.ui.view" id="commission_range_form_view">
            <field name="name">commission.range.form</field>
            <field name="model">commission.range</field>
            <field name="arch" type="xml">
                <form string="Commission Range">
                    <header>
                        <field name="state" widget="statusbar"/>
                         <button name="action_confirm" type="object" string="Confirm" class="oe_highlight"
                                invisible="state != 'draft'"/>
                        <button name="action_set_draft" type="object" string="Set To Draft" class="oe_highlight"
                                invisible="state != 'confirm'"/>
                    </header>
                    <sheet>
                        <div class="oe_title mb24">
                            <h1>
                                <field class="text-break" name="name"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="date_from"/>
                                <field name="range_from" invisible="type != 'indirect'"/>
                                <field name="type"/>
                                <field name="company_id"/>
                            </group>
                            <group>
                                <field name="date_to"/>
                                <field name="range_to" invisible="type != 'indirect'"/>
                            </group>
                            <group/>
                        </group>
                        <notebook>
                            <page string="Sales Team" invisible="type != 'direct'">
                                <field name="sales_team_commission_ids">
                                    <list string="Sales Team" editable="bottom">

                                        <field name="range_from"/>
                                        <field name="range_to"/>
                                        <field name="sales_person_percent"/>
                                        <field name="sales_manager_percent"/>

                                    </list>
                                </field>
                            </page>
                            <page string="Sales Team" invisible="type != 'indirect'">
                                <field name="sales_team_commission_ids">
                                    <list string="Sales Team" editable="bottom">

                                        <field name="group_id" domain="[('category_id.name', '=','Sales commission')]"  widget="selection"/>
                                        <field name="group_percent"/>
                                    </list>
                                </field>
                            </page>
                            <page string="Sales Agent" invisible="type != 'direct'">
                                <field name="sales_agent_commission_ids">
                                    <list string="Sales Agent" editable="bottom">
                                        <field name="type" width='50%'/>
                                        <field name="sales_agent_percent"/>
                                    </list>
                                </field>
                            </page>
                        </notebook>

                    </sheet>
                    <chatter></chatter>

                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="commission_range_list_view">
            <field name="name">commission.range.list</field>
            <field name="model">commission.range</field>
            <field name="arch" type="xml">
                <list string="Sales Commission Range">
                    <field name="name"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="type"/>
                    <field name="state"/>
                </list>
            </field>
        </record>


        <record model="ir.actions.act_window" id="commission_range_action">
            <field name="name">Commissions Range</field>
            <field name="res_model">commission.range</field>
            <field name="view_mode">list,form</field>
        </record>

        <menuitem id="menu_commission_main" name="Commissions" sequence="29"
                  parent="eco_real_estate.eco_menu_real_estate_root"/>
        <menuitem id="menu_sales_commission" name="Generate Commission" sequence="10"
                  parent="menu_commission_main" action="sales_commission_worksheet_action"/>
        <menuitem id="menu_commission_configuration" name="Commission Configuration" sequence="20"
                  parent="menu_commission_main" action="commission_range_action"/>

    </data>
</odoo>
