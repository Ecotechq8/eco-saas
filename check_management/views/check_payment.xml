<odoo>
    <data>
        <record id="view_norm_payment_filter_check" model="ir.ui.view">
            <field name="name">view.norm.payment.filter</field>
            <field name="model">normal.payments</field>
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
                <search string="Search Payments">
                    <field name="partner_id" string="Partner"/>
                    <field name="receipt_number" string="Receipt Number"/>
                    <field name="description" string="Description"/>
                    <field name="account_id" string="Account"/>
                    <group expand="0" string="Group By">
                        <filter string="Partner" name="partner_id" domain="[]" context="{'group_by': 'partner_id'}"/>
                        <filter string="Status" name="status" domain="[]" context="{'group_by': 'state'}"/>
                        <filter string="Account" name="account_id" domain="[]" context="{'group_by': 'account_id'}"/>
                        <filter string="Payment Date" name="payment_date" domain="[]"
                                context="{'group_by': 'payment_date'}"/>
                        <filter string="Currency" name="currency_id" domain="[]" context="{'group_by': 'currency_id'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="normal_payments_check_form_view" model="ir.ui.view">
            <field name="name">realestate.noraml.payments.form</field>
            <field name="model">normal.payments</field>
            <field name="arch" type="xml">
                <form string="">
                    <header>
                        <button name="action_send"
                                string="Send"
                                class="oe_highlight"
                                type="object"
                                invisible="state != 'draft'"
                                groups="check_management.group_send_payment"
                        />

                        <button name="set_to_draft"
                                string="Reset to draft"
                                class="oe_highlight"
                                type="object"
                                invisible="state != 'send'"
                                groups="check_management.group_send_payment"
                        />


                        <button name="action_cancel"
                                string="Cancel"
                                class="oe_highlight"
                                type="object"
                                invisible="state  in ['posted','cancel','draft']"
                                groups="check_management.group_cancel_payment"
                        />

                        <button name="action_confirm" string="Confirm" class="oe_highlight"
                                invisible="state  in ['draft','cancel','posted']"
                                groups="check_management.group_post_payment"
                                type="object"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" name="button_journal_entries"
                                    string="Journal Items" type="object" icon="fa-bars"/>

                            <button name="action_open_manual_reconciliation_widget" type="object"
                                    string="Payment Matching" class="oe_stat_button" icon="fa-dollar"
                                    groups="account.group_account_user"
                                    invisible="send_rec_money  == 'internal' or state != 'posted'"/>

                        </div>
                        <div class="oe_title">
                            <label for="name" string="Title"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group col="4">
                            <field name="custom_partner_domain" invisible="1"/>
                            <field name="custom_payment_domain" invisible="1"/>
                            <field name="is_bank_recieved" invisible="1"/>
                            <field name="payment_for" invisible="send_rec_money != 'send'"
                                   required="send_rec_money=='send'" readonly="state != 'draft'"/>
                            <field name="partner_id"
                                   domain="custom_partner_domain"
                                   required="send_rec_money == 'rece'  or  payment_for =='vendor'"
                                   invisible="send_rec_money  == 'internal' or  payment_for =='expense'"
                                   readonly="state != 'draft'"/>
                            <field name="payment_method"
                                   options='{"no_open": True, "no_create": True}'
                                   domain="custom_payment_domain"
                                   readonly="state != 'draft'"/>
                            <label for="amount"/>
                            <div name="amount_div" class="o_row">
                                <field name="amount1" widget='monetary' options="{'currency_field': 'currency_id'}"
                                       readonly="state != 'draft'"
                                       invisible="payment_subtype in ('issue_check', 'rece_check') and  send_rec_money !='internal'"/>
                                <field name="amount" widget='monetary' options="{'currency_field': 'currency_id'}"
                                       invisible="payment_subtype not in ('issue_check', 'rece_check') or send_rec_money =='internal'"/>
                            </div>
                            <field name="account_id"
                                   readonly="state != 'draft'"/>
                            <field name="payment_date"
                                   readonly="state != 'draft'"/>
                            <field name="analyitc_id" readonly="state != 'draft'"/>
                            <field name="send_rec_money" widget="radio" readonly="state != 'draft'" invisible="1"/>
                            <field name="receipt_number"
                                   readonly="1"/>
                            <field name="currency_id" readonly="state != 'draft'"/>
                            <field name="user_id" invisible="1"/>
                            <field name="payment_subtype" invisible="1"/>
                            <field name="description" readonly="state != 'draft'"/>
                        </group>
                        <notebook>
                            <page string="Checks"
                                  invisible="payment_subtype not in ('issue_check', 'rece_check') or send_rec_money =='internal'">
                                <field name="pay_check_ids" readonly="state != 'draft'">
                                    <list editable="bottom">
                                        <field name="check_number" readonly="check_book_id != 0" force_save="1"/>
                                        <field name="check_date"/>
                                        <field name="check_book_id" column_invisible="parent.is_bank_recieved"
                                               domain="[('state','=','active'),('bank_id','=',bank)]"/>
                                        <field name="amount"/>
                                        <field name="bank"/>
                                        <field name="dep_bank"/>
                                        <field name="check_management_id"/>
                                    </list>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <chatter></chatter>


                </form>
            </field>
        </record>

        <record id="normal_payments_check_list_view" model="ir.ui.view">
            <field name="name">noraml.payments.list</field>
            <field name="model">normal.payments</field>
            <field name="arch" type="xml">
                <list string="">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="payment_date"/>
                    <field name="state"/>
                    <field name="create_uid"/>
                    <field name="amount" sum="Total Amount"/>
                    <field name="payment_method"/>
                </list>
            </field>
        </record>

        <record id="check_action_norm_pay_action" model="ir.actions.act_window">
            <field name="name">Payments</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">normal.payments</field>
            <field name="view_mode">list,form</field>
        </record>

        <record id="check_action_norm_payment_send_action" model="ir.actions.act_window">
            <field name="name">Pay</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">normal.payments</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('send_rec_money', '=', 'send'),('payment_method.type','=','cash')]</field>
            <field name="context">{'default_send_rec_money': 'send'}</field>
        </record>

        <record id="check_action_norm_payment_receive_action" model="ir.actions.act_window">
            <field name="name">Receive</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">normal.payments</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('send_rec_money', '=', 'rece'),('payment_method.type','=','cash')]</field>
            <field name="context">{'default_send_rec_money': 'rece'}</field>
        </record>

        <record id="check_action_norm_payment_internal_action" model="ir.actions.act_window">
            <field name="name">Internal</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">normal.payments</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('send_rec_money', '=', 'internal')]</field>
            <field name="context">{'default_send_rec_money': 'internal'}</field>
        </record>

    </data>
</odoo>
